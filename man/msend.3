.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "MSEND" "3" "" "libdill" "libdill Library Functions"
.hy
.SH NAME
.PP
msend \- sends a message
.SH SYNOPSIS
.IP
.nf
\f[C]
#include\ <libdill.h>

int\ msend(
\ \ \ \ int\ s,
\ \ \ \ const\ void*\ buf,
\ \ \ \ size_t\ len,
\ \ \ \ int64_t\ deadline);
\f[]
.fi
.SH DESCRIPTION
.PP
This function sends a message to a socket.
It is a blocking operation that unblocks only after entire message is
sent.
There is no such thing as partial send.
If a problem, including timeout, occurs while sending the message error
is returned to the user and the socket cannot be used for sending from
that point on.
.PP
\f[B]s\f[]: The socket to send the message to.
.PP
\f[B]buf\f[]: Message to send.
.PP
\f[B]len\f[]: Size of the message, in bytes.
.PP
\f[B]deadline\f[]: A point in time when the operation should time out,
in milliseconds.
Use the \f[B]now\f[] function to get your current point in time.
0 means immediate timeout, i.e., perform the operation if possible or
return without blocking if not.
\-1 means no deadline, i.e., the call will block forever if the
operation cannot be performed.
.SH RETURN VALUE
.PP
In case of success the function returns 0.
In case of error it returns \-1 and sets \f[B]errno\f[] to one of the
values below.
.SH ERRORS
.IP \[bu] 2
\f[B]EBADF\f[]: Invalid handle.
.IP \[bu] 2
\f[B]EBUSY\f[]: The handle is currently being used by a different
coroutine.
.IP \[bu] 2
\f[B]ECANCELED\f[]: Current coroutine was canceled.
.IP \[bu] 2
\f[B]ECONNRESET\f[]: Broken connection.
.IP \[bu] 2
\f[B]EINVAL\f[]: Invalid argument.
.IP \[bu] 2
\f[B]EMSGSIZE\f[]: The message is too long.
.IP \[bu] 2
\f[B]ENOTSUP\f[]: The handle does not support this operation.
.IP \[bu] 2
\f[B]EPIPE\f[]: Closed connection.
.IP \[bu] 2
\f[B]ETIMEDOUT\f[]: Deadline was reached.
.SH EXAMPLE
.IP
.nf
\f[C]
int\ rc\ =\ msend(s,\ "ABC",\ 3,\ \-1);
\f[]
.fi
.SH SEE ALSO
.PP
\f[B]mrecv\f[](3) \f[B]mrecvl\f[](3) \f[B]msendl\f[](3) \f[B]now\f[](3)
