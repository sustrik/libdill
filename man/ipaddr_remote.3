.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "IPADDR_REMOTE" "3" "" "libdill" "libdill Library Functions"
.hy
.SH NAME
.PP
ipaddr_remote \- resolve the address of a remote IP endpoint
.SH SYNOPSIS
.IP
.nf
\f[C]
#include\ <libdill.h>

int\ ipaddr_remote(
\ \ \ \ struct\ ipaddr*\ addr,
\ \ \ \ const\ char*\ name,
\ \ \ \ int\ port,
\ \ \ \ int\ mode,
\ \ \ \ int64_t\ deadline);
\f[]
.fi
.SH DESCRIPTION
.PP
Converts an IP address in human\-readable format, or a name of a remote
host into an \f[B]ipaddr\f[] structure.
.PP
Mode specifies which kind of addresses should be returned.
Possible values are:
.IP \[bu] 2
\f[B]IPADDR_IPV4\f[]: Get IPv4 address.
.IP \[bu] 2
\f[B]IPADDR_IPV6\f[]: Get IPv6 address.
.IP \[bu] 2
\f[B]IPADDR_PREF_IPV4\f[]: Get IPv4 address if possible, IPv6 address
otherwise.
.IP \[bu] 2
\f[B]IPADDR_PREF_IPV6\f[]: Get IPv6 address if possible, IPv4 address
otherwise.
.PP
Setting the argument to zero invokes default behaviour, which, at the
present, is \f[B]IPADDR_PREF_IPV4\f[].
However, in the future when IPv6 becomes more common it may be switched
to \f[B]IPADDR_PREF_IPV6\f[].
.PP
\f[B]addr\f[]: Out parameter, The IP address object.
.PP
\f[B]name\f[]: Name of the remote IP endpoint, such as "www.example.org"
or "192.168.0.111".
.PP
\f[B]port\f[]: Port number.
Valid values are 1\-65535.
.PP
\f[B]mode\f[]: What kind of address to return.
See above.
.PP
\f[B]deadline\f[]: A point in time when the operation should time out,
in milliseconds.
Use the \f[B]now\f[] function to get your current point in time.
0 means immediate timeout, i.e., perform the operation if possible or
return without blocking if not.
\-1 means no deadline, i.e., the call will block forever if the
operation cannot be performed.
.PP
This function is not available if libdill is compiled with
\f[B]\-\-disable\-sockets\f[] option.
.SH RETURN VALUE
.PP
In case of success the function returns 0.
In case of error it returns \-1 and sets \f[B]errno\f[] to one of the
values below.
.SH ERRORS
.IP \[bu] 2
\f[B]EADDRNOTAVAIL\f[]: The name of the remote host cannot be resolved
to an address of the specified type.
.IP \[bu] 2
\f[B]ECANCELED\f[]: Current coroutine was canceled.
.IP \[bu] 2
\f[B]ETIMEDOUT\f[]: Deadline was reached.
.SH EXAMPLE
.IP
.nf
\f[C]
ipaddr\ addr;
ipaddr_remote(&addr,\ "www.example.org",\ 80,\ 0,\ \-1);
int\ s\ =\ socket(ipaddr_family(addr),\ SOCK_STREAM,\ 0);
connect(s,\ ipaddr_sockaddr(&addr),\ ipaddr_len(&addr));
\f[]
.fi
.SH SEE ALSO
.PP
\f[B]ipaddr_equal\f[](3) \f[B]ipaddr_family\f[](3)
\f[B]ipaddr_len\f[](3) \f[B]ipaddr_local\f[](3) \f[B]ipaddr_port\f[](3)
\f[B]ipaddr_setport\f[](3) \f[B]ipaddr_sockaddr\f[](3)
\f[B]ipaddr_str\f[](3) \f[B]now\f[](3)
